import{j as i,r as o}from"./auth-BQqFf9p-.js";const n={X:"X",O:"O",EMPTY:" "};class N{x;y;constructor(s,e){this.x=s,this.y=e}}class m{claimedBy;investedPoints;constructor(){this.claimedBy=n.EMPTY,this.investedPoints={[n.X]:0,[n.O]:0,[n.EMPTY]:0}}investPoints(s,e){this.investedPoints[s]+=e,this.investedPoints[s]>=10&&(this.claimedBy=s)}}class h{grid;winner;constructor(s){s&&s.grid?(this.grid=s.grid,this.winner=n.EMPTY):(this.grid=[],this.winner=n.EMPTY)}initi(s,e){for(let t=0;t<s;t++){this.grid[t]=[];for(let a=0;a<e;a++)this.grid[t][a]=new m}}investPoints(s,e,t,a){this.grid[s][e].claimedBy===n.EMPTY&&this.grid[s][e].investPoints(t,a)}checkWin(){for(let s=0;s<3;s++){if(this.grid[s][0].claimedBy!==n.EMPTY&&this.grid[s][0].claimedBy===this.grid[s][1].claimedBy&&this.grid[s][1].claimedBy===this.grid[s][2].claimedBy){this.winner=this.grid[s][0].claimedBy;return}if(this.grid[0][s].claimedBy!==n.EMPTY&&this.grid[0][s].claimedBy===this.grid[1][s].claimedBy&&this.grid[1][s].claimedBy===this.grid[2][s].claimedBy){this.winner=this.grid[0][s].claimedBy;return}}if(this.grid[0][0].claimedBy!==n.EMPTY&&this.grid[0][0].claimedBy===this.grid[1][1].claimedBy&&this.grid[1][1].claimedBy===this.grid[2][2].claimedBy){this.winner=this.grid[0][0].claimedBy;return}if(this.grid[0][2].claimedBy!==n.EMPTY&&this.grid[0][2].claimedBy===this.grid[1][1].claimedBy&&this.grid[1][1].claimedBy===this.grid[2][0].claimedBy){this.winner=this.grid[0][2].claimedBy;return}return null}clone(){const s=this.grid.map(t=>t.map(a=>{const l=new m;return l.claimedBy=a.claimedBy,l.investedPoints={...a.investedPoints},l})),e=new h({grid:s});return e.winner=this.winner,e}}const B={ROLLING:"ROLLING",INVESTING:"INVESTING"};class u{displayName;symbol;isTurn;pointsToInvest;isGambling;gambleAmount;playerId;constructor(s){this.displayName=s.displayName,this.symbol=s.symbol,this.isTurn=s.isTurn||!1,this.pointsToInvest=s.pointsToInvest||0,this.isGambling=s.isGambling||!1,this.gambleAmount=s.gambleAmount||1,this.playerId=s.playerId}}function x({tile:d,onTileAction:s,turn:e,board:t}){const a=()=>{console.log("Tile clicked"),console.log(e),console.log(d),console.log(t),!(d.claimedBy!==" "||t.winner!=n.EMPTY)&&s(e,e==="X"?"O":"X")};return i.jsx("div",{className:"tile",onClick:()=>{a()},children:d.claimedBy!==" "?i.jsx("h2",{className:"claimedBy",children:d.claimedBy}):i.jsxs("div",{className:"investedPoints",children:[i.jsx("label",{htmlFor:"",className:"x-points",children:d.investedPoints[n.X]}),i.jsx("label",{htmlFor:"",className:"o-points",children:d.investedPoints[n.O]})]})})}function p({board:d,turn:s,onTileAction:e,canPlay:t}){return i.jsx("div",{className:`board ${t?"can-play":"cannot-play"}`,children:d.grid.map((a,l)=>i.jsx("div",{className:"board-row",children:a.map((c,r)=>i.jsx(x,{tile:c,board:d,turn:s,onTileAction:(g,y)=>{e(new N(r,l),g,y)}},r))},l))})}function T({onRoll:d,startRolling:s}){const e=o.useRef(null),[t,a]=o.useState(!1),l=o.useCallback(()=>{if(t)return;s(),a(!0);const c=Math.floor(Math.random()*6)+1;e.current.dataset.side=c.toString(),e.current.classList.toggle("reRoll"),setTimeout(()=>{a(!1),d(c)},2e3)},[t,d]);return i.jsxs("div",{id:"dice","data-side":"1",onClick:l,ref:e,children:[i.jsx("div",{className:"sides side-1",children:i.jsx("span",{className:"dot dot-1"})}),i.jsxs("div",{className:"sides side-2",children:[i.jsx("span",{className:"dot dot-1"}),i.jsx("span",{className:"dot dot-2"})]}),i.jsxs("div",{className:"sides side-3",children:[i.jsx("span",{className:"dot dot-1"}),i.jsx("span",{className:"dot dot-2"}),i.jsx("span",{className:"dot dot-3"})]}),i.jsxs("div",{className:"sides side-4",children:[i.jsx("span",{className:"dot dot-1"}),i.jsx("span",{className:"dot dot-2"}),i.jsx("span",{className:"dot dot-3"}),i.jsx("span",{className:"dot dot-4"})]}),i.jsxs("div",{className:"sides side-5",children:[i.jsx("span",{className:"dot dot-1"}),i.jsx("span",{className:"dot dot-2"}),i.jsx("span",{className:"dot dot-3"}),i.jsx("span",{className:"dot dot-4"}),i.jsx("span",{className:"dot dot-5"})]}),i.jsxs("div",{className:"sides side-6",children:[i.jsx("span",{className:"dot dot-1"}),i.jsx("span",{className:"dot dot-2"}),i.jsx("span",{className:"dot dot-3"}),i.jsx("span",{className:"dot dot-4"}),i.jsx("span",{className:"dot dot-5"}),i.jsx("span",{className:"dot dot-6"})]})]})}export{h as B,T as D,n as P,B as T,p as a,u as b,m as c};
